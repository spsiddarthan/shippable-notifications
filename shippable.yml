language: node_js
#build_image: drydock/u14nod
build:
  ci:
    - echo 'CI is running'
#    - npm install
#    - npm start & 
  post_ci:
#    - docker pull vivex/sample
#    - docker build -t="quay.io/vivex/node-web-app:$BRANCH.$BUILD_NUMBER" .
#    - docker build -t="vivex/node-web-app:$BRANCH.$BUILD_NUMBER" .
#    - docker push quay.io/vivex/node-web-app:$BRANCH.$BUILD_NUMBER
#    - docker push vivex/node-web-app:$BRANCH.$BUILD_NUMBER
#    - docker tag vivex/node-web-app:$BRANCH.$BUILD_NUMBER 035214584383.dkr.ecr.us-east-1.amazonaws.com/node-web-app:$BRANCH.$BUILD_NUMBER
#    - docker push 035214584383.dkr.ecr.us-east-1.amazonaws.com/node-web-app:$BRANCH.$BUILD_NUMBER
#    - docker pull drydock/u14nod:2016.02

integrations:
   hub:
    - integrationName: docker
      type: docker
      
   notifications:
    - integrationName: 	slack-int
      type: slack
      recipients:
        - "#slack-notification-ch"
      branches:
        only:
          - master
      on_success: always
      on_start: always
      on_failure: always
      
    - integrationName: eventTrigger
      type: webhook
      on_success: always
      on_failure: never
      on_pull_request: never
      on_start: never  
      
    - integrationName: hipchat
      type: hipchat
      recipients:
        - "#shiproom"
      branches:
        only:
          - master
      on_success: always
      on_start: 
      on_failure: always  
#  hub:
#    - integrationName: "quay-vivex"
#      type: quay.io
#    - integrationName: "docker-vivex"
#      type: docker
#    - integrationName: "ecr-vivex"
#      type: ecr

